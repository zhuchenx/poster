webpackJsonp([13],{15:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){ydk.client?e(ydk.client):l.default.one("ydk.ready",e)}Object.defineProperty(t,"__esModule",{value:!0}),t.autoHeight=t.autoSize=void 0,t.ready=a;var r=o(9),i=n(r),c=o(22),l=n(c),s=$("html"),d=window.devicePixelRatio||1;t.autoSize=_.throttle(function(){i.default.nextTick(function(){ydk.setWinSize({width:Math.ceil(s.width()*d),height:Math.ceil(s.height()*d)})})},100),t.autoHeight=_.throttle(function(){i.default.nextTick(function(){ydk.setWinHeight({height:Math.ceil(s.height()*d)})})},100)},28:function(e,t,o){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function a(){$("._debug_msg").empty()}Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.stop=t.start=void 0,t.clear=a;var r=o(15),i=n(r);o(36);var c,l,s=function(e){clearTimeout(c),c=setTimeout(function(){e.fadeOut(500,function(){e.remove()})},5e3)},d=(t.start=function(){l=_.now()},t.stop=function(e,t){d([e,"：<em>",_.now()-(t||l),"</em> ms"])},t.log=function(e){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];i.ready(function(t){if(t.debug){var o=$("._debug_msg");0==o.length&&(o=$('<div class="_debug_msg"></div>'),$("body").append(o)),o.append("<p>"+(_.isArray(e)?e.join(""):e)+"</p>"),s(o)}})});$(function(){i.ready(function(e){e.debug&&$("body").on("mouseenter","._debug_msg",function(){clearTimeout(c)}).on("mouseleave","._debug_msg",function(){s($(this))})})})},36:function(e,t){},38:function(e,t){"use strict";$(function(){var e,t,o=window,n=function(o){e&&e.removeClass("active"),t&&t.hide().removeClass("active").removeAttr("onpannel").trigger("close"),e=null,t=null};$("body").on("click","[pannel]",function(o){var a=$(this),r=$(a.attr("pannel"));r.is(":visible")?n():(n(),_.delay(function(){r.show().attr("onpannel","1"),e=a.addClass("active"),t=r.addClass("active").trigger("open")}))}).on("click","[onpannel]",function(e){e.stopPropagation()}).on("click","[pannel-close]",function(e){n()}).bind("click",n).bind("mousedown",function(e){0!=e.button&&n()}),$(o).bind("blur",n)})},67:function(e,t,o){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(7),i=a(r),c=o(72),l=n(c),s=o(6),d=n(s);o(38);var u=function(e){var t=decodeURI(location.hash),o=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=t.indexOf("?")+1,a=t.substring(n),r=a.match(o);return null!=r?unescape(r[2]):null};$("html"),$(document);t.default={data:function(){return{keyword:u("keyword"),lang:u("lang"),setting:d.getDefault(),categoryText:"",category:"",isAdd:!1,trans:"",phonetic:"",newCategory:null,plan:!1,progress:null,editIdx:u("editIdx"),lanFrom:u("lanFrom")||"",lanTo:u("lanTo")||""}},filters:{phoneticFilter:function(e){if(e)return e.replace(/\[|]/g,"")}},created:function(){ydk.setWinSize({width:480,height:405,type:"Wordbook"})},methods:l,mounted:function(){var e=this;d.get(function(t){e.setting=t}),ydk.queryWordBookCategory({success:function(t){e.category=t.data}}),console.log("======== checkWordBook lang:",e.lang),ydk.checkWordBook({word:e.keyword,lang:e.lang,success:function(t){t.has?(console.log(t),e.trans=t.data.trans,e.phonetic=e.$options.filters.phoneticFilter(t.data.phonetic),e.categoryText=t.data.category,e.progress=t.data.progress,t.data.progress!=-1&&(e.plan=!0)):ydk.getDictResult({data:{keyword:e.keyword,lang:e.lang,type:"quick"},success:function(t){var o,n=t.data;n.basic&&n.basic.length>0?o=n.basic:n.web&&n.web.length>0&&(o=[],n.web.forEach(function(e){(0,i.default)(e).forEach(function(t){o.push(t+" ："+e[t].join(","))})})),e.trans=o?o.join("\n"):"",n.ussm||n.uksm?e.phonetic="us"==e.setting.content.pronounce_type?n.ussm:n.uksm:e.phonetic=n.sm||""}})}})}}},72:function(e,t,o){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}function a(){var e=this,t=e.keyword,o=e.lang||"en",n=e.trans,a=e.phonetic||"",r="未分组"==e.categoryText?"":e.categoryText,i=-1,c=e.lanFrom,l=e.lanTo;n.length<3e3&&a.length<60?(console.log("======== checkWordBook lang:",o),ydk.checkWordBook({word:t,lang:o,success:function(s){f.log(["res.has：<em>",s.has,"</em>"]),i=s.data?s.data.progress:-1,0==e.plan?(i=-1,ydk.setWordBookPlan({data:[{word:t,lang:o}],plan:!1})):1==e.plan&&1==i&&ydk.setWordBookPlan({data:[{word:t,lang:o}],plan:!0});var d={word:t,lang:o,trans:n,phonetic:a,category:r,progress:i,lanFrom:c,lanTo:l};s.has?(ydk.updateToWordBook(d),g.emit("wordbook.update",{word:t,lang:o,phonetic:a,trans:n,lanFrom:c,lanTo:l,category:r,progress:i,editIdx:e.editIdx},"all"),ydk.rlog({action:"dict_edit_wordbook",type:"edit",keyword:e.keyword,le:e.lang}),ydk.closeWin({type:"Wordbook"})):(e.$toast.show({text:"该单词不在单词本中哦",type:"warn"}),d.plan=$("input[name=revise]").is(":checked"),ydk.addToWordBook(d),ydk.closeWin({type:"Wordbook"}),ydk.rlog({action:"dict_edit_wordbook",type:"add",keyword:e.keyword,le:e.lang}))}})):(n.length>3e3&&e.$toast.show({text:"释义文字长度不能大于3000",type:"warn"}),a.length>60&&e.$toast.show({text:"发音字符长度不能大于60",type:"warn"}))}function r(){ydk.closeWin({type:"Wordbook"})}function i(e){var t=this;t.isAdd=!1,t.categoryText=e}function c(e){var t=this;t.isAdd=!1}function l(){var e=this;e.isAdd=!e.isAdd}function s(e){var t=this,o=!1,n=t.newCategory,a="分组命名重复了哦";if(13==e.keyCode&&null!=n){if(t.newCategory="",_.each(t.category,function(e){e.name==n&&(o=!0)}),_.each(t.category,function(e){e.name==n?o=!0:"未分组"!=n&&"所有分组"!=n&&"未分组单词"!=n||(a="不能取该分组名",o=!0)}),o)return void t.$toast.show({text:a,type:"warn"});if(n.length<1)return;ydk.addWordBookCategory({name:n}),null==t.category&&(t.category=[]),t.category.splice(0,0,{name:n}),t.categoryText=n}}function d(){var e=this;e.isAdd=!1}function u(){var e=this;ydk.removeFromWordBook({data:[{word:e.keyword,lang:e.lang}]}),ydk.rlog({action:"dict_add_wordbook",keyfrom:"deskdict.main",type:"delete",le:e.lang}),g.emit("wordbook.remove",{favor:!1},"all"),ydk.closeWin({type:"Wordbook"})}Object.defineProperty(t,"__esModule",{value:!0}),t.editComfirm=a,t.closeWin=r,t.selectSort=i,t.onCategoryCancel=c,t.toggleAdd=l,t.submit=s,t.onPannelClose=d,t.removeFromWordbook=u;var p=o(12),g=n(p),y=o(28),f=n(y)},82:function(e,t){},83:function(e,t,o){o(82);var n=o(1)(o(67),o(84),"data-v-21547202",null);e.exports=n.exports},84:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"wb-alert wb-word-opt"},[o("ul",[o("li",[o("label",[e._v("单词"),o("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],staticClass:"g-input-text",attrs:{type:"text",readonly:"readonly"},domProps:{value:e.keyword},on:{input:function(t){t.target.composing||(e.keyword=t.target.value)}}}),e._v(" "),o("a",{staticClass:"btn-remove btn",attrs:{href:"javascript:;"},on:{click:e.removeFromWordbook}},[e._v("从单词本中删除")])])]),e._v(" "),o("li",{staticClass:"category"},[o("label",[e._v("分组"),o("div",{staticClass:"sort-select ellipsis",attrs:{pannel:"#js_category_add"}},[o("span",[e._v(e._s(e.categoryText||"未分组"))]),o("span",{staticClass:"icon icon-down"})])]),e._v(" "),o("div",{staticClass:"pannel-add hide",attrs:{id:"js_category_add"}},[o("div",{staticClass:"category-wrap"},[o("ul",{attrs:{"pannel-close":""}},[o("li",{class:{active:""==e.categoryText}},[o("label",{on:{click:function(t){return e.selectSort("")}}},[e._v("未分组")])]),e._v(" "),e._l(e.category,function(t){return o("li",{class:{active:e.categoryText==t.name}},[o("label",{on:{click:function(o){return e.selectSort(t.name)}}},[e._v(e._s(t.name))])])})],2)]),e._v(" "),o("div",{staticClass:"category-create"},[o("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.newCategory,expression:"newCategory",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"创建新分组，按回车键保存"},domProps:{value:e.newCategory},on:{keydown:function(t){return e.submit(t)},input:function(t){t.target.composing||(e.newCategory=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])])]),e._v(" "),o("li",[o("label",[e._v("音标"),o("input",{directives:[{name:"model",rawName:"v-model",value:e.phonetic,expression:"phonetic"}],staticClass:"g-input-text",attrs:{type:"text",maxlength:"63"},domProps:{value:e.phonetic},on:{input:function(t){t.target.composing||(e.phonetic=t.target.value)}}})])]),e._v(" "),o("li",[o("label",[e._v("释义"),o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.trans,expression:"trans"}],staticClass:"g-textarea",attrs:{type:"textarea"},domProps:{value:e.trans},on:{input:function(t){t.target.composing||(e.trans=t.target.value)}}})])])]),e._v(" "),o("div",{staticClass:"add-revise"},[o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.plan,expression:"plan"}],staticClass:"g-checkbox all-select",attrs:{type:"checkbox",name:"revise"},domProps:{checked:e.plan,checked:Array.isArray(e.plan)?e._i(e.plan,null)>-1:e.plan},on:{change:function(t){var o=e.plan,n=t.target,a=!!n.checked;if(Array.isArray(o)){var r=null,i=e._i(o,r);n.checked?i<0&&(e.plan=o.concat([r])):i>-1&&(e.plan=o.slice(0,i).concat(o.slice(i+1)))}else e.plan=a}}}),e._v("加入复习计划")])]),e._v(" "),o("div",{staticClass:"wb-btn clear-fix"},[o("a",{staticClass:"g-btn-normal btn cancel",attrs:{href:"javascript:;"},on:{click:e.closeWin}},[e._v("取消")]),e._v(" "),o("a",{staticClass:"g-btn-red btn confirm",attrs:{href:"javascript:;"},on:{click:e.editComfirm}},[e._v("确定")])])])])},staticRenderFns:[]}}});